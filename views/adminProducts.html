<div ng-controller="productCtrl">
  <table id="productTable" class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Category</th>
        <th>Price</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="item in products | orderBy: 'category'"
          ng-hide="item.objectId === editedProduct.objectId">
        <td>{{item.name}}</td>
        <td class="description">{{item.description}}</td>
        <td>{{item.category}}</td>
        <td>{{item.price | currency}}</td>
        <td>
          <button ng-click="startEdit(item)" 
                  ng-class="{warning: editedProduct===item}" 
                  class="btn btn-xs btn-primary">
            Edit
          </button>
          <button ng-click="deleteProduct(item)" class="btn btn-xs btn-primary">
            Delete
          </button>
        </td>
      </tr>
      <tr ng-class="{danger: editedProduct}">
        <td><input ng-model="editedProduct.name" required/></td>
        <td><input ng-model="editedProduct.description" required /></td>
        <td><input ng-model="editedProduct.category" required /></td>
        <td><input type="number" ng-model="editedProduct.price" required /></td>
        <td>
          <button ng-click="createProduct(editedProduct)" 
                  ng-hide="editedProduct.objectId"
                  class="btn btn-xs btn-primary">
            Create
          </button>
          <button ng-click="updateProduct(editedProduct)"
                  ng-show="editedProduct.objectId"
                  class="btn btn-xs btn-primary">
            Save
          </button>
          <button ng-click="cancelEdit()"
                  ng-show="editedProduct"
                  class="btn btn-xs btn-primary">
            Cancel
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
